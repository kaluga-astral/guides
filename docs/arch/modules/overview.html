<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-arch/modules/overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Обзор Modules | Astral.Frontend Guides</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kaluga-astral.github.io/guides/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://kaluga-astral.github.io/guides/img/social-card.png"><meta data-rh="true" property="og:url" content="https://kaluga-astral.github.io/guides/docs/arch/modules/overview"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Обзор Modules | Astral.Frontend Guides"><meta data-rh="true" name="description" content="Common"><meta data-rh="true" property="og:description" content="Common"><link data-rh="true" rel="icon" href="/guides/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kaluga-astral.github.io/guides/docs/arch/modules/overview"><link data-rh="true" rel="alternate" href="https://kaluga-astral.github.io/guides/docs/arch/modules/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://kaluga-astral.github.io/guides/docs/arch/modules/overview" hreflang="x-default"><link rel="stylesheet" href="/guides/assets/css/styles.d14e6182.css">
<script src="/guides/assets/js/runtime~main.86ce387b.js" defer="defer"></script>
<script src="/guides/assets/js/main.653e15d7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/guides/"><div class="navbar__logo"><img src="/guides/img/logo.png" alt="Логотип Астрал-Софт" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/guides/img/logo.png" alt="Логотип Астрал-Софт" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Frontend Guides</b></a><a class="navbar__item navbar__link" href="/guides/docs/issues">Issues</a><a class="navbar__item navbar__link" href="/guides/docs/arch/intro">Architecture Guide</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kaluga-astral/guides" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/guides/docs/category/architecture-guide">Architecture Guide</a><button aria-label="Collapse sidebar category &#x27;Architecture Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/overview">Краткий обзор архитектуры</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/shared">Shared</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/data">Data</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/guides/docs/category/modules">Modules</a><button aria-label="Collapse sidebar category &#x27;Modules&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/docs/arch/modules/overview">Обзор Modules</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/guides/docs/category/features">Features</a><button aria-label="Expand sidebar category &#x27;Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/guides/docs/category/modules-guides">Modules Guides</a><button aria-label="Expand sidebar category &#x27;Modules Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/modules/domain">Domain</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/contract-first">contract-first</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/docs/arch/screens">screens</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/docs/category/permissions-паттерн-доступов-на-клиенте">Permissions. Паттерн доступов на клиенте</a><button aria-label="Expand sidebar category &#x27;Permissions. Паттерн доступов на клиенте&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/docs/category/работа-с-env">Работа с env</a><button aria-label="Expand sidebar category &#x27;Работа с env&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/docs/issues">Issues</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/guides/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/guides/docs/category/architecture-guide"><span itemprop="name">Architecture Guide</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/guides/docs/category/modules"><span itemprop="name">Modules</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Обзор Modules</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Обзор Modules</h1>
<p><img decoding="async" loading="lazy" alt="Common" src="/guides/assets/images/common-b6c6487fbfbc7bade903f4445498d8a6.png" width="628" height="669" class="img_ev3q"></p>
<p><strong>Modules</strong> <strong>- самый важный слой приложения.</strong></p>
<p>Данный слой содержит реализацию бизнес требований, которые делают продукт конкурентоспособным. Именно на этот слой должно быть обращено наибольшее внимание при проектировании и разработке.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="мотивация">Мотивация<a href="#мотивация" class="hash-link" aria-label="Direct link to Мотивация" title="Direct link to Мотивация">​</a></h2>
<p>Для качественной реализации бизнес требований необходимо учитывать особенности предметной области проекта. Она состоит из набора понятий, сущностей и процессов, которые являются фундаментом разработки.</p>
<p>Однако, по мере роста функционала приложения, список концепций предметной области может стать слишком большим и запутанным. Концепции могут стать расплывчатыми, а модели предметной области сложными и неуправляемыми. Это приводит к тому, что приложение становится похожим на &quot;Big ball of mud” (большой комок грязи).</p>
<p><img decoding="async" loading="lazy" alt="Dirty" src="/guides/assets/images/dirty-81fb8a6e007878ac26c19de2c4735917.png" width="595" height="339" class="img_ev3q"></p>
<p>Для решения описанной проблемы в Astral Architecture Guide применяются методы стратегического проектирования DDD (Domain Driven Design).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="разбиение-предметной-области-на-модули">Разбиение предметной области на модули<a href="#разбиение-предметной-области-на-модули" class="hash-link" aria-label="Direct link to Разбиение предметной области на модули" title="Direct link to Разбиение предметной области на модули">​</a></h2>
<p>Большая предметная область проекта разбивается на подобласти (модули). Каждая подобласть содержит в себе свой изолированный набор концепций.</p>
<p>Подобласти или модули - это изолированные наборы концепций, которые связаны между собой.</p>
<p>Преимущества использования данного метода:</p>
<ul>
<li>Позволяет упростить восприятие модели предметной области, поскольку каждый модуль содержит только те концепции, которые ему необходимы. Это также способствует более четкому пониманию бизнес-требований и их реализации.</li>
<li>Упрощает масштабирование приложения и улучшает его производительность. Если функционал приложения распределен по модулям, то разработчики могут работать над каждым модулем независимо друг от друга, что ускоряет процесс разработки.</li>
<li>Способствует упрощению тестирования и сопровождения приложения. Если каждый модуль содержит только те концепции, которые ему необходимы, то тестирование каждого модуля становится более простым и эффективным.</li>
<li>Позволяет распределить зоны ответственности команды и зоны влияния концепций.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="единый-язык">Единый язык<a href="#единый-язык" class="hash-link" aria-label="Direct link to Единый язык" title="Direct link to Единый язык">​</a></h3>
<p>Для того чтобы каждый модуль был максимально понятен и согласован внутри команды разработчиков, важно использовать единый язык в рамках каждого модуля. Это означает, что каждый модуль должен иметь свой словарь терминов и понятий, которые используются внутри этого модуля.</p>
<p>При этом, одинаковые термины в разных модулях могут иметь разные значения. Например, в предметной области мониторинга ошибок (Sentry) в модуле авторизации и аутентификации <code>User</code> будет иметь одно значение и фичи, а в модуле отображение ошибок <code>User’ом</code> будет является пользователь приложения, в котором произошла ошибка.</p>
<p>Использование единого языка позволяет:</p>
<ul>
<li>Уменьшить количество недопониманий и ошибок при разработке и поддержке кода.</li>
<li>Улучшить коммуникацию между разработчиками и другими участниками проекта, такими как QA, менеджеры проекта и Backend.</li>
<li>Избежать двойного трактования понятий.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="сегментирование-модулей">Сегментирование модулей<a href="#сегментирование-модулей" class="hash-link" aria-label="Direct link to Сегментирование модулей" title="Direct link to Сегментирование модулей">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Modules" src="/guides/assets/images/modules-1ef95c764e9e8e6f658eca05e8cbe0f4.png" width="620" height="470" class="img_ev3q"></p>
<p>Модуль содержит два сегмента:</p>
<ul>
<li><strong><code>Features</code></strong>. Фичи, поставляемые модулем</li>
<li><strong><code>Domain</code></strong>.  Логика, поставляемая модулем</li>
</ul>
<p>Пример структуры:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    └── payment/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/               </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<p><a href="/guides/docs/arch/modules/features/overview">Подробный обзор Features</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="domain">Domain<a href="#domain" class="hash-link" aria-label="Direct link to Domain" title="Direct link to Domain">​</a></h3>
<p><a href="/guides/docs/arch/modules/domain">Подробный обзор Domain</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="зависимости-модулей">Зависимости модулей<a href="#зависимости-модулей" class="hash-link" aria-label="Direct link to Зависимости модулей" title="Direct link to Зависимости модулей">​</a></h2>
<p><strong>Modules</strong> зависит от:</p>
<ul>
<li>Shared</li>
<li>Data</li>
<li>Других модулей</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Common" src="/guides/assets/images/common-b6c6487fbfbc7bade903f4445498d8a6.png" width="628" height="669" class="img_ev3q"></p>
<p>Зависимости от Shared и Data нет необходимости контролировать, они могут свободно использоваться в <strong><code>Modules</code></strong>.</p>
<p>Однако модули системы могут использовать <code>features</code> и <code>domain</code> друг друга. Важно контролировать зависимости между модулями и следить за тем, чтобы уровень зацепления был наименьшим.</p>
<p><img decoding="async" loading="lazy" alt="Refs" src="/guides/assets/images/modules-refs-0fd69409bbf4328267f291b69ff62004.png" width="1902" height="1654" class="img_ev3q"></p>
<p><strong>Низкий уровень зацепления позволяет вносить изменения в модули без значительного влияния на остальные модул</strong>и. Это означает, что при изменении логики в одном модуле, другие модули не будут затронуты. Это также способствует повторному использованию кода, так как каждый модуль может быть использован в других проектах или в других частях текущего проекта.</p>
<p>Для контроля зависимостей между модулями используются следующие концепции:</p>
<ul>
<li>Использование <code>index</code> файлов для предоставления публичного API. Контроль поставляемых фич</li>
<li>Использование <code>external</code> файлов для контроля входящих зависимостей</li>
</ul>
<p><img decoding="async" loading="lazy" alt="External" src="/guides/assets/images/modules-external-734714b63373a202f6cdc8a51049b661.png" width="5282" height="1841" class="img_ev3q"></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── external.ts # Входящие зависимости      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts    # Публичное API модуля          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="использование-index-файлов-для-предоставления-публичного-api">Использование <code>index</code> файлов для предоставления публичного API<a href="#использование-index-файлов-для-предоставления-публичного-api" class="hash-link" aria-label="Direct link to использование-index-файлов-для-предоставления-публичного-api" title="Direct link to использование-index-файлов-для-предоставления-публичного-api">​</a></h3>
<p>Каждый модуль должен предоставлять публичное API: какие фичи модуль готов предоставлять приложению.</p>
<p>Для реализации данного подхода используются <code>index</code> файлы:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├ ── modules/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts # Публичное API модуля          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>index.ts</code></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#393A34">{</span><span class="token exports"> </span><span class="token exports maybe-class-name">CardPayment</span><span class="token exports punctuation" style="color:#393A34">,</span><span class="token exports"> </span><span class="token exports maybe-class-name">CashPayment</span><span class="token exports"> </span><span class="token exports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./features&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">CardPaymentStore</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">CashPaymentStore</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">PaymentType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./domain&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>В данном примере модуль PaymentModule предоставляет для использования только то, что экспортируется из <code>index.ts</code>. Другие <code>features</code> и <code>domain</code> не доступны во вне модуля.</p>
<p><strong>Импорты из модуля должны идти только через <code>index</code></strong></p>
<p>Valid:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { CashPayment } from &#x27;@astral/modules/payment&#x27;; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invalid:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { PayButton } from &#x27;@astral/modules/payment/features&#x27;; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="использование-external-файлов-для-контроля-входящих-зависимостей">Использование <code>external</code> файлов для контроля входящих зависимостей.<a href="#использование-external-файлов-для-контроля-входящих-зависимостей" class="hash-link" aria-label="Direct link to использование-external-файлов-для-контроля-входящих-зависимостей" title="Direct link to использование-external-файлов-для-контроля-входящих-зависимостей">​</a></h3>
<p>Необходимо контролировать уровень зацепления между модулями.</p>
<p>Может произойти ситуация, когда один модуль сильно зацеплен с другим. Без промежуточного слоя это приведет к хрупкости одного из модулей - изменение одного модуля провоцирует изменения в другом.</p>
<p><img decoding="async" loading="lazy" alt="ExternalProblem" src="/guides/assets/images/modules-external-problem-30c5dc9e05caf4c13d2b0e474c99e166.png" width="4182" height="1346" class="img_ev3q"></p>
<p>Для решения данной проблемы каждый модуль должен явным образом описывать свои входные зависимости от других модулей через <code>external</code> файлы.</p>
<p><img decoding="async" loading="lazy" alt="ExternalSolution" src="/guides/assets/images/modules-external-solution-734714b63373a202f6cdc8a51049b661.png" width="5282" height="1841" class="img_ev3q"></p>
<p>Благодаря <code>external</code> мы можем без усилий проследить за зависимостями модуля и при необходимости избавится от нежелательного зацепеления.</p>
<p><strong>Пример</strong></p>
<p><code>Payment</code> модуль использует из <code>Auth</code> <code>UserStore</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── external.ts </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Payment</code> должен делать импорт из <code>Auth</code> модуля только через <code>external</code> файл.</p>
<p>Valid</p>
<p><code>external.ts</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export { UserStore } from &#x27;@astral/modules/auth&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Payment/features/CardPayment/store/store.ts</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { UserStore } from &#x27;../../../external&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Invalid</p>
<p><code>Payment/features/CardPayment/store/store.ts</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { UserStore } from &#x27;@astral/modules/auth&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="универсальные-модули-layout">Универсальные модули (Layout)<a href="#универсальные-модули-layout" class="hash-link" aria-label="Direct link to Универсальные модули (Layout)" title="Direct link to Универсальные модули (Layout)">​</a></h2>
<p>При проектировании модулей важно понимать, что существуют универсальные подобласти, которые напрямую не связаны с предметной областью проекта, но при этом содержат фичи из других модулей.</p>
<p>Примером такой области может являться <code>Layout</code>.</p>
<p><code>Layout</code> приложения может содержать <code>header</code>, <code>footer</code>, <code>PageLayout</code> и т.п.</p>
<p>На первый взгляд данные фичи не относятся к предметной области проекта и должны быть помещены в <code>shared</code>. Но это не так. <code>Layout</code> может внутри себя содержать фичи из <code>AuthModule</code> для отображения на каждом screen пользовательских данных. Таким образом <code>LayoutModule</code> превращается в универсальный модуль потому, что косвенно связан с предметной областью проекта.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── layout/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── AppHeader/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── AppFooter/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── AppLayout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── PageLayout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── FormLayout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>При проектировании универсальных модулей важно определить их границы и не загружать их функциональностью, которая не относится к их основной це ли.</p>
<p>Например, <code>NoAccess</code> фича не относится к <code>Layout</code>, подобная фича должна быть вынесена в <code>AccessModule</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="с-чего-начать">С чего начать<a href="#с-чего-начать" class="hash-link" aria-label="Direct link to С чего начать" title="Direct link to С чего начать">​</a></h2>
<p>В начале проектирования достаточно будет выделить два-три модуля, один из которых будет Layout.</p>
<p>По мере роста фичей в модуле вы сможете понять, что необходимо выделять отдельный модуль для набора фичей.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="пример-проектирования-модулей-онлайн-магазина">Пример проектирования модулей онлайн-магазина<a href="#пример-проектирования-модулей-онлайн-магазина" class="hash-link" aria-label="Direct link to Пример проектирования модулей онлайн-магазина" title="Direct link to Пример проектирования модулей онлайн-магазина">​</a></h2>
<p>Допустим, мы разрабатываем приложение для онлайн-магазина.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="модули">Модули<a href="#модули" class="hash-link" aria-label="Direct link to Модули" title="Direct link to Модули">​</a></h4>
<p>Предметную область можно разбить на следующие модули:</p>
<ul>
<li><strong>Каталог товаров</strong> - содержит все, что связано с взаимодействием <strong>товара</strong> и <strong>покупателя</strong>. Фичами модуля могут быть поиск товаров по различным параметрам, фильтрация товаров по категориям и тегам.</li>
<li><strong>Корзина</strong> - отвечает за управление <strong>корзиной</strong> <strong>покупателя</strong>. Фичами модуля могут быть добавление товаров в корзину, изменение количества товаров и оформление заказа.</li>
<li><strong>Оплата</strong> - отвечает за обработку <strong>оплаты</strong> <strong>заказов</strong> в приложении. Фичами модуля могут быть выбор способа оплаты, ввод данных платежных карт, обработка платежей и отображение статуса оплаты для пользователя.</li>
<li><strong>Авторизация и регистрация</strong> - отвечает за управление пользователями. Фичами модуля могут быть регистрация новых пользователей, авторизация и управление профилем пользователя.</li>
<li><strong>Layout</strong> - отвечает за разметку блоков приложения.</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── catalog/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── cart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    └── layout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="catalog-module">Catalog Module<a href="#catalog-module" class="hash-link" aria-label="Direct link to Catalog Module" title="Direct link to Catalog Module">​</a></h4>
<p><strong>Features</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── catalog/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── CatalogList/   # Список товаров</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── ProductPhoto/  # Фото товара. Является приватной фичей.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── CatalogCard/   # Карточка товара</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── Filters/       # Фильтрация товаров </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── SearchBar/     # Поиск товаров</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── cart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── layout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Зависимости фичей</strong></p>
<p><code>CatalogCard</code> должен содержать кнопку добавления товара в корзину. Добавление товара в корзину - это зона ответственности модуля <code>Cart</code>, именно там и находится ui кнопки добавления товара <code>AddToCartButton</code> и бизнес-логика добавления товара <code>AddToCartStore.</code></p>
<p><code>AddToCartButton</code> и <code>AddToCartStore</code> используются в <code>CatalogCard.</code></p>
<p><img decoding="async" loading="lazy" alt="Example" src="/guides/assets/images/modules-example-af2ac0b770f913ebb7c1ef8156308817.png" width="3949" height="1546" class="img_ev3q"></p>
<p><strong>Переиспользуемая фича ProductPhoto</strong></p>
<p><code>ProductPhoto</code> переиспользуется в <code>CatalogList</code> и <code>CatalogCard</code>.</p>
<p>При этом <code>ProductPhoto</code> не экспортируется из модуля <code>Catalog</code>, а значит недоступна в других модулях.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cart-module">Cart Module<a href="#cart-module" class="hash-link" aria-label="Direct link to Cart Module" title="Direct link to Cart Module">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── catalog/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── cart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── ShoppingList/     # Список товаров, добавленных в корзину         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── OrderForm/        # Форма оформления заказа           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── AddToCartButton/  # Кнопка добавления товара в корзину</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── CartIconBtn/      # Иконка корзины с счетчиком</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── stores/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    |    ├── AddToCartStore/  # логика добавления товара</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── layout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="payment-module">Payment Module<a href="#payment-module" class="hash-link" aria-label="Direct link to Payment Module" title="Direct link to Payment Module">​</a></h4>
<p>В модуле <code>payment</code> у нас есть необходимость в переиспользовании логики оплаты картой и оплаты наличными, поэтому эта логика выносится в <code>domain</code>.</p>
<p><code>CardPaymentStore</code> и <code>CashPaymentStore</code> используется внутри фич <code>CardPayment</code>, <code>CashPayment</code>, а также может быть использована в другом модуле, например, <code>Cart</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── catalog/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── cart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── PaymentSwitch/    # Выбор способа оплаты         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── CardPayment/      # Оплата картой           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── CashPayment/      # Оплата наличными</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── stores/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    |    ├── CardPaymentStore/  # Логика оплаты картой</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    |    ├── CashPaymentStore/  # Логика оплаты наличными</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── layout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="layout-module">Layout Module<a href="#layout-module" class="hash-link" aria-label="Direct link to Layout Module" title="Direct link to Layout Module">​</a></h4>
<p>Layout нашего для каждой страницы состоит из: <code>header</code>, <code>footer</code>, <code>sidebar</code>.</p>
<p>В <code>header</code> для отображения иконки с корзиной и счетчика товаров используется <code>CartIconBtn</code> из <code>Cart</code> модуля. При этом для каждого <code>screen</code> в <code>header</code> будет свой <code>title</code>.</p>
<p>Нам необходимо в <code>screens</code> переиспользовать <code>AppLayout</code>, который будет содержать <code>CartIconBtn</code> и предоставлять возможность на каждой странице добавлять свой <code>title</code> в <code>AppLayout</code>.</p>
<p>Это означает, что наш <code>Layout</code> связан с предметной областью проекта и поэтому для <code>Layout’ов</code> выделяется отдельный модуль.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── screens/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── catalog/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── cart/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── payment/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── auth/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    ├── layout/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    ├── features/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── AppLayout/      # Layout приложения         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── PageLayout/     # Layout каждой страницы</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    ├── FormLayout/     # Layout форм</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    |    └── index.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── shared/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="результат">Результат<a href="#результат" class="hash-link" aria-label="Direct link to Результат" title="Direct link to Результат">​</a></h3>
<p><a href="https://github.com/kaluga-astral/vite-boilerplate" target="_blank" rel="noopener noreferrer">https://github.com/kaluga-astral/vite-boilerplate</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="style-guide">Style Guide<a href="#style-guide" class="hash-link" aria-label="Direct link to Style Guide" title="Direct link to Style Guide">​</a></h2>
<p><a href="https://kaluga-astral.github.io/style-guide/docs/category/modules" target="_blank" rel="noopener noreferrer">Modules | Astral.Frontend Style Guide</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kaluga-astral/guides/tree/main/docs/docs/arch/modules/overview.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/docs/category/modules"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Modules</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/docs/category/features"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Features</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#мотивация" class="table-of-contents__link toc-highlight">Мотивация</a></li><li><a href="#разбиение-предметной-области-на-модули" class="table-of-contents__link toc-highlight">Разбиение предметной области на модули</a><ul><li><a href="#единый-язык" class="table-of-contents__link toc-highlight">Единый язык</a></li></ul></li><li><a href="#сегментирование-модулей" class="table-of-contents__link toc-highlight">Сегментирование модулей</a><ul><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#domain" class="table-of-contents__link toc-highlight">Domain</a></li></ul></li><li><a href="#зависимости-модулей" class="table-of-contents__link toc-highlight">Зависимости модулей</a><ul><li><a href="#использование-index-файлов-для-предоставления-публичного-api" class="table-of-contents__link toc-highlight">Использование <code>index</code> файлов для предоставления публичного API</a></li><li><a href="#использование-external-файлов-для-контроля-входящих-зависимостей" class="table-of-contents__link toc-highlight">Использование <code>external</code> файлов для контроля входящих зависимостей.</a></li></ul></li><li><a href="#универсальные-модули-layout" class="table-of-contents__link toc-highlight">Универсальные модули (Layout)</a></li><li><a href="#с-чего-начать" class="table-of-contents__link toc-highlight">С чего начать</a></li><li><a href="#пример-проектирования-модулей-онлайн-магазина" class="table-of-contents__link toc-highlight">Пример проектирования модулей онлайн-магазина</a><ul><li><a href="#результат" class="table-of-contents__link toc-highlight">Результат</a></li></ul></li><li><a href="#style-guide" class="table-of-contents__link toc-highlight">Style Guide</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"></div></footer></div>
</body>
</html>