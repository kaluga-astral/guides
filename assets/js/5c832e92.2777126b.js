"use strict";(self.webpackChunkastral_guides=self.webpackChunkastral_guides||[]).push([[6596],{1560:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var o=t(7624),r=t(2172);const s={},a="Render \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0432 store",i={id:"arch/modules/guides/renderComponentInStore",title:"Render \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0432 store",description:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u044c render \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432 store \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u044f\u0445:",source:"@site/docs/arch/modules/guides/renderComponentInStore.md",sourceDirName:"arch/modules/guides",slug:"/arch/modules/guides/renderComponentInStore",permalink:"/guides/docs/arch/modules/guides/renderComponentInStore",draft:!1,unlisted:!1,editUrl:"https://github.com/kaluga-astral/guides/tree/main/docs/docs/arch/modules/guides/renderComponentInStore.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Modules Guides",permalink:"/guides/docs/category/modules-guides"},next:{title:"Domain",permalink:"/guides/docs/arch/modules/domain"}},c={},d=[{value:"adaptComponentToDomain",id:"adaptcomponenttodomain",level:2},{value:"\u041f\u0440\u043e\u0431\u0440\u043e\u0441 render \u0432 service. \u041f\u0440\u0438\u043c\u0435\u0440 \u0441 notify",id:"\u043f\u0440\u043e\u0431\u0440\u043e\u0441-render-\u0432-service-\u043f\u0440\u0438\u043c\u0435\u0440-\u0441-notify",level:2},{value:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 props \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430",id:"\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-props-\u0434\u043b\u044f-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430",level:2},{value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 ReactNode \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",id:"\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435-\u0441\u0441\u044b\u043b\u043a\u0438-\u043d\u0430-reactnode-\u0434\u043b\u044f-\u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e-\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"render-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432-\u0432-store",children:"Render \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0432 store"}),"\n",(0,o.jsx)(n.p,{children:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u044c render \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432 store \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u044f\u0445:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u043e\u0433\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0441\u0435\u0440\u0432\u0438\u0441"}),"\n",(0,o.jsx)(n.li,{children:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 props \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"adaptcomponenttodomain",children:"adaptComponentToDomain"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"adaptComponentToDomain"})," \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u0440\u0435\u043d\u0434\u0435\u0440 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u0432\u043d\u0435 ",(0,o.jsx)(n.code,{children:"jsx"}),", \u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0432 ",(0,o.jsx)(n.code,{children:"UIStore"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { type FunctionComponent, type ReactNode, createElement } from 'react';\n\nexport type RenderComponentInDomain<TProps extends object> = (\n  props: TProps,\n) => ReactNode;\n\n/**\n * \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c react-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0432 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0435 \u043a\u0430\u043a render \u0444\u0443\u043d\u043a\u0446\u0438\u044e\n */\nexport const adaptComponentToDomain =\n  <TProps extends object>(\n    component: FunctionComponent<TProps>,\n  ): RenderComponentInDomain<TProps> =>\n  (props) =>\n    createElement(component, props);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u043f\u0440\u043e\u0431\u0440\u043e\u0441-render-\u0432-service-\u043f\u0440\u0438\u043c\u0435\u0440-\u0441-notify",children:"\u041f\u0440\u043e\u0431\u0440\u043e\u0441 render \u0432 service. \u041f\u0440\u0438\u043c\u0435\u0440 \u0441 notify"}),"\n",(0,o.jsx)(n.p,{children:"\u0417\u0430\u0434\u0430\u0447\u0430: \u043f\u0440\u0438 \u0432\u044b\u0437\u043e\u0432\u0435 notify \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u043e\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { PaymentMessage } from '../../features';\n\nexport class PaymentStore {\n  constructor(\n    private readonly notify: Notify,\n    private readonly paymentRepo: PaymentRepo,\n    private readonly renderPaymentMessage: RenderComponentInDomain<{\n      productID: string;\n    }>,\n  ) {\n    makeAutoObservable(this);\n  }\n\n  public pay = async (productID: string) => {\n    await this.paymentRepo.pay(productID);\n\n    this.notify.success('\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e', {\n      content: this.renderPaymentMessage({ productID }),\n    });\n  };\n}\n\nexport const createPaymentStore = () =>\n  new PaymentStore(\n    notifyService,\n    paymentRepository,\n    adaptComponentToDomain(PaymentMessage),\n  );\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-props-\u0434\u043b\u044f-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430",children:"\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 props \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { DeleteIcon, EditIcon } from '@example/shared';\nimport type { ActionCellProps } from '@example/shared';\n\ntype ActionIcons = {\n  renderEdit: RenderComponentInDomain;\n  renderDelete: RenderComponentInDomain;\n};\n\nexport class UIStore {\n  constructor(private readonly actionIcons: ActionIcons) {\n    makeAutoObservable(this);\n  }\n\n  public get actions(): ActionCellProps {\n    return [\n      {\n        icon: this.actionIcons.renderDelete(),\n        onClick: () => this.delete(),\n      },\n      {\n        icon: this.actionIcons.renderEdit(),\n        onClick: () => this.edit(),\n      },\n    ];\n  }\n}\n\nexport const createUIStore = () =>\n  new UIStore({\n    renderDelete: adaptComponentToDomain(DeleteIcon),\n    renderEdit: adaptComponentToDomain(EditIcon),\n  });\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435-\u0441\u0441\u044b\u043b\u043a\u0438-\u043d\u0430-reactnode-\u0434\u043b\u044f-\u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e-\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 ReactNode \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type { ReactNode } from 'react';\n\nexport class UIStore {\n  private alertMessage: ReactNode;\n\n  constructor(private readonly notify: Notify) {\n    makeAutoObservable(this);\n  }\n\n  public mount = (message: ReactNode) => {\n    this.alertMessage = message;\n  };\n\n  public send = () => {\n    this.notify(this.alertMessage);\n  };\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'const Alert = () => {\n  const [{ mount }] = useState(createUIStore);\n\n  const message = <Message variant="info">Hello</Message>;\n\n  useEffect(() => {\n    mount(message);\n  }, []);\n\n    ...\n};\n'})})]})}function l(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},2172:(e,n,t)=>{t.d(n,{I:()=>i,M:()=>a});var o=t(1504);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);